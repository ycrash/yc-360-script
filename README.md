# yc-data-script
![Go](https://img.shields.io/badge/language-Go-skyblue.svg)
[![License](https://img.shields.io/badge/license-Apache%202.0-orange.svg)](LICENSE)
[![Docs](https://img.shields.io/badge/yc--360%20Script-Documentation-green)](https://docs.ycrash.io/)

**yc-360 Script** is a lightweight diagnostic script that captures comprehensive troubleshooting artifacts (like Application logs, GC logs, thread dumps, heap dumps, OS-level metrics) from environments like Linux, Windows, Docker, Kubernetes, and OpenShift.

![img](/docs/images/360-degree.png)

# yc-360 Script: One Script to Capture 360° Production Artifacts

## What is yc-360 Script?

**yc-360 script** is a simple script that captures 16 different artifacts from your application in a pristine manner, which are highly useful to troubleshoot production problems. Here is the list of artifacts captured by the script:

| **Artifact**          | **What It Captures**                                                                 |
|-----------------------|--------------------------------------------------------------------------------------|
| Application Log       | Logs generated by your application—useful for identifying functional failures       |
| GC Log                | Garbage collection activity—helps detect memory overuse, frequent GCs, pauses       |
| Thread Dump           | Snapshot of all threads in the JVM—key to spotting deadlocks, BLOCKED/stuck threads |
| Heap Dump             | Memory snapshot of JVM objects—used to identify memory leaks or heavy objects       |
| Heap Substitute       | Lightweight version of heap dump when full heap dump isn’t available                |
| `top`                 | Overall CPU/memory usage of system processes                                         |
| `ps`                  | Snapshot of currently running processes                                              |
| `top -H`              | Thread-level CPU usage—helps isolate CPU-intensive threads                           |
| Disk Usage (`df -h`)  | Available/used disk space—useful when app errors stem from full disks                |
| `dmesg`               | Kernel logs—catches low-level system issues like hardware errors or OOM kills        |
| `netstat`             | Network connections, open ports, and listening sockets                               |
| `ping`                | Network latency to external or internal endpoints                                    |
| `vmstat`              | Virtual memory, I/O, and CPU scheduling stats                                        |
| `iostat`              | Disk I/O performance metrics                                                         |
| Kernel Parameters     | System tuning configurations (like swappiness, max open files)                       |
| Extended Data         | Any custom scripts or data you configure yc-360 script to collect                           |
| Metadata              | Basic system/app metadata (JVM version, hostname, uptime, etc.)                      |


## Why you need yc-360 Script?

**1. APMs highlight symptoms, but deeper diagnostics need artifacts:** Monitoring tools like APMs are excellent at identifying symptoms such as memory spikes, high CPU usage, or degraded response times. However, when it's time to get to the root cause, you need more than charts and alerts. For example, if memory consumption spikes, you’ll need a heap dump to identify which objects are leaking. If CPU usage increases, a thread dump is required to trace it back to the exact lines of code causing the spike. The yc-360 script complements your APM by collecting these deeper diagnostic artifacts in a single run—making it much easier and faster to isolate the problem.

**2. Customer-premise deployments offer no visibility or access:** In many cases, your application runs on a customer’s infrastructure where you don’t have shell access or real-time visibility. Asking them to send screenshots or partial logs rarely provides enough context to troubleshoot effectively. The yc-360 script solves this by giving you a simple script that the customer can run themselves. It gathers all the essential artifacts—across JVM, system, and network layers—so you get everything you need to troubleshoot the issue thoroughly, even without direct access.

**3. Issues that are hard to reproduce:** Some production issues are intermittent—CPU spikes that last a few seconds, memory usage climbing slowly over time, or a backend API that times out randomly. These problems often disappear by the time someone logs in to debug. The yc-360 script helps capture the system’s state right when the issue occurs, providing a snapshot that can be analyzed offline even after the system recovers.

**4. Coordinating across distributed teams:** In global teams where developers, operations, and support work in different time zones or regions, coordinating a live troubleshooting session can cause delays. The yc-360 script allows on-site or first-level teams to run the script and share the artifacts asynchronously, enabling faster hand-offs and eliminating timezone blockers during urgent incidents.

## Getting Started - How to run the yc-360 Script?

1. Download the latest yc-data-script from [this](https://tier1app.com/dist/ycrash/yc-agent-latest.zip) location
2. Unzip the downloaded ```yc-agent-latest.zip``` file. (Say you are unzipping in '/opt/workspace/yc-agent-latest' folder)
3. In the unzipped folder you will find yc-data-script by operating system:

    - `linux/yc` - If you are running on Unix/Linux, then use this script.
    - `windows/yc.exe` - If you are running on Windows, then use this script.
    - `mac/yc` - If you are running on MAC, then use this script.

4. You can execute the yc script by issuing following command:
```
./yc -j {JAVA_HOME} -onlyCapture -p {PID} -hd
```
Where,

- **JAVA_HOME** is the home directory where JDK is installed
- **PID** is the troubled target process ID. Instead of process ID, you can also pass **Unique Token** that will uniquely identify the process. [What is **Unique Token**?](https://test.docs.ycrash.io/ycrash-agent/faq/what-is-unique-token-in-process.html)

### Example:

```
./yc -j /usr/java/jdk1.8.0_141 -onlyCapture -p 15326 -hd
```
When you pass the above arguments, yc-data-script will capture all the application level and system level artifacts/logs from the server from the target JVM & host for analysis. Captured artifacts will be compressed into a zip file and stored in the current directory where the above command was executed. The zip file will have the name in the format: 'yc-YYYY-MM-DDTHH-mm-ss.zip'. 
    
**Example:** 'yc-2021-03-06T14-02-42.zip'.

**WARNING:** In Linux/Unix, yc-360 script should be run with same user permissions as your target java application user permission. Say your target java application is running with user permission 'tomcat-user', then yc-360 script should also be run with 'tomcat-user' permission.

**IMPORTANT TIP:** In order to detect memory related problems, you need to enable GC logging on your application. You can enable GC logging on your application, by passing the arguments [mentioned here](https://test.docs.ycrash.io/ycrash-agent/features/how-to-enable-gc-logs.html).

**HELP:** If you encounter any issues during setup, contact our support team at [support@tier1app.com](support@tier1app.com). To see all yc-360 script arguments, please [refer here](https://test.docs.ycrash.io/ycrash-agent/all-yc-360-script-arguments.html).

### Launch Modes

You can launch yc-data-script in following [4 different modes](https://test.docs.ycrash.io/ycrash-agent/launch-modes/introduction.html):

1. [**On-demand Mode:**](https://test.docs.ycrash.io/ycrash-agent/launch-modes/on-demand-mode) In this mode you can directly transmit 360-degree artifacts from your server to yCrash server for analysis.
2. [**Only-capture Mode:**](https://test.docs.ycrash.io/ycrash-agent/launch-modes/only-capture-mode) In this mode, the yc-360 script captures 360-degree artifacts from your server and stores them on your disk instead of transmitting them to yCrash server.
3. [**API Mode:**](https://test.docs.ycrash.io/ycrash-agent/launch-modes/api-mode) In this mode you can integrate yc-data-script with your current monitoring tools such as AppDynamics, New Relic, Dynatrace, …
4. [**M3 (Micro-metrics Monitoring) Mode:**](https://test.docs.ycrash.io/ycrash-agent/launch-modes/m3-mode) In this mode, yc-data-script proactively detect performance outages much earlier before it surfaces

## How to Analyze the Artifacts Generated by the yc-data-script?

You can analyze the artifacts captured by yc-data-script either manually or through [yCrash server](https://ycrash.io/). yCrash server analyzes all the captured data and generates a root cause analysis report instantly. You can use the [Bundle upload](https://docs.ycrash.io/ycrash-features/bundle-upload.html#step-1-go-to-upload-incident-form) feature in the yCrash server to analyze the captured 360-degree data. 

## How to Build the yc-data-script?

Please refer to any one of the following links if you want to build the yc-data-script in that corresponding operating system:

1. Build yc-data-script in [Windows](/docs/build/build_agent_windows.md)
2. Build yc-data-script in [Linux](/docs/build/build_agent_linux.md)
3. Build yc-data-script in [MacOS](/docs/build/build_agent_macos.md)

## FAQ

<details>
  <summary><strong>1. What if I Want to Capture Additional Data that yc-360 Script Doesn’t Collect by Default?</strong></summary>
  
You can extend the functionality using the `-extendedDataScript` argument. This lets you specify a custom script that yc-360 script will execute as the final step, allowing you to capture additional logs, metrics, or custom files specific to your environment.
</details>

<details>
  <summary><strong>2. What is the Overhead of Running yc-360 Script?</strong></summary>

The `yc-360` script is designed to be lightweight and non-intrusive, ensuring minimal impact on your application's performance. It primarily reads existing system and application data without altering configurations or consuming significant resources. In performance tests conducted on a Linux machine running a Java Spring Boot application, the script demonstrated:

- **CPU Usage:** Averaging around 0.05%, with occasional spikes up to 3% during data collection.
- **Memory Usage:** Consistently between 0.1% and 0.2%.

These metrics indicate that `yc-360` script can safely run in production environments without causing noticeable overhead. For detailed insights, refer to the [yCrash Agent Overhead Performance blog post](https://blog.ycrash.io/ycrash-agent-overhead-performance/).
</details>

<details>
  <summary><strong>3. Is it Safe to Run yc-360 Script in Production Environments?</strong></summary>

Absolutely. The yc-360 script is a non-intrusive, read-only script. It doesn’t modify any application or system configuration. It only reads and collects diagnostics and is safe to run even in high-availability production environments.
</details>

<details>
  <summary><strong>4. Can yc-360 Script be Executed in Containerized Environments like Docker, Kubernetes, or OpenShift?</strong></summary>

Yes. The yc-360 script supports all major environments including bare-metal, virtual machines, Docker containers, Kubernetes pods, and OpenShift clusters. You can run it directly inside containers or as part of sidecar/init containers for collection.
</details>

<details>
  <summary><strong>5. What if I don’t have Direct Access to the Production Environment?</strong></summary>

That’s exactly what yc-360 script is built for. You can send the script to your customer or operations team and ask them to run it on your behalf. It generates a ZIP file with all the artifacts, which they can send back to you for analysis.
</details>

<details>
  <summary><strong>6. How Much Time Does it Take to Run?</strong></summary>

In most environments, yc-360 script completes execution in under 30 seconds. However, collecting heap dumps may take longer depending on the heap size and system performance.
</details>

<details>
  <summary><strong>7. What Kind of Issues Can yc-360 Script Help Troubleshoot?</strong></summary>

The yc-360 script is effective in diagnosing memory leaks, GC pauses, CPU spikes, thread contention, application freezes, disk pressure, network latency, backend slowness, and more. It provides a 360° snapshot of your application and environment at the time of the issue.
</details>

<details>
  <summary><strong>8. Where Can I Analyze the Artifacts Generated by yc-360 Script?</strong></summary>

You can use tools like [GCeasy.io](https://gceasy.io) (for GC logs), [fastThread.io](https://fastthread.io) (for thread dumps), [HeapHero.io](https://heaphero.io). [Eclipse MAT](https://eclipse.dev/mat/) (for heap dumps), and [yCrash.io](https://ycrash.io) for unified 360° analysis.
</details>

<details>
  <summary><strong>9. How do I Schedule yc-360 Script to Run Periodically?</strong></summary>

You can schedule the script using cron (Linux/macOS), Task Scheduler (Windows), or Kubernetes CronJobs (in container environments). Just ensure the appropriate file write permissions are set in the output directory.
</details>

<details>
  <summary><strong>10. Is yc-360 Script Customizable?</strong></summary>

Yes. The yc-360 script is designed as a modular shell script. You can clone the repository and customize individual collection commands or add/remove specific artifacts based on your organization’s requirements.
</details>

<details>
  <summary><strong>11. Is Support Available for yc-360 Script?</strong></summary>

For community support, please use the [GitHub Issues page](https://github.com/ycrash/yc-data-script/issues). For enterprise-grade support and integration assistance, visit [yCrash.io](https://ycrash.io/).
</details>